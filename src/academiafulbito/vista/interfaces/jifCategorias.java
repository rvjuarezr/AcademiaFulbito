/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * jifCategorias.java
 *
 * Created on 02/08/2024, 02:42:40 PM
 */

package academiafulbito.vista.interfaces;

import academiafulbito.controlador.beans.CategoriaFacade;
import academiafulbito.modelo.entidades.Categoria;
import academiafulbito.vista.utilidades.ButtonEditor;
import academiafulbito.vista.utilidades.ButtonRenderer;
import academiafulbito.vista.utilidades.Utils;
import java.sql.SQLException;
import java.util.List;
import javax.swing.JCheckBox;
import javax.swing.JDesktopPane;
import javax.swing.ListSelectionModel;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Ronald J
 */
public class jifCategorias extends javax.swing.JInternalFrame {

    JDesktopPane jdp;
    public static CategoriaFacade categoriaFacade;
    DefaultTableModel modelo;
    /** Creates new form jifCategorias */
    public jifCategorias(JDesktopPane jdpModAF){
        initComponents();
        jdp=jdpModAF;
        int[] anchoColumnas = {15,55, 20, 20, 80}; // Anchos específicos para cada columna
        jfPrincipal.utils.setAnchoColumnas(tblCategorias, anchoColumnas);
        jfPrincipal.utils.ocultarColumnas(tblCategorias, 0);
        categoriaFacade = new CategoriaFacade();
        listarCategorias(categoriaFacade.getListadoCategorias());
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        tphCategorias = new org.edisoncor.gui.tabbedPane.TabbedPaneHeader();
        panel1 = new org.edisoncor.gui.panel.Panel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblCategorias = new javax.swing.JTable();
        panel2 = new org.edisoncor.gui.panel.Panel();

        setClosable(true);
        setTitle("MANTENIMIENTO CATEGORIAS");
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        panel1.setColorPrimario(new java.awt.Color(255, 255, 255));
        panel1.setColorSecundario(new java.awt.Color(51, 51, 255));
        panel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tblCategorias.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null},
                {null, null, null, null, null}
            },
            new String [] {
                "ID", "CATEGORIA", "EDAD MIN", "EDAD MAX", "Acciones"
            }
        ));
        jScrollPane1.setViewportView(tblCategorias);

        panel1.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 0, 620, 250));

        tphCategorias.addTab("LISTADO", panel1);

        panel2.setColorPrimario(new java.awt.Color(255, 255, 255));
        panel2.setColorSecundario(new java.awt.Color(51, 51, 255));
        panel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
        tphCategorias.addTab("CATEGORIAS", panel2);

        getContentPane().add(tphCategorias, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 640, 300));

        pack();
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JScrollPane jScrollPane1;
    private org.edisoncor.gui.panel.Panel panel1;
    private org.edisoncor.gui.panel.Panel panel2;
    private javax.swing.JTable tblCategorias;
    private org.edisoncor.gui.tabbedPane.TabbedPaneHeader tphCategorias;
    // End of variables declaration//GEN-END:variables

    private void listarCategorias(List<Categoria> listaCategorias){
        // Selecciona el primer tab en un JTabbedPane
        tphCategorias.setSelectedIndex(0);

        // Obtiene el modelo de la tabla
        modelo=(DefaultTableModel)tblCategorias.getModel();

        // limpia los datos existentes en la tabla.
        Utils.limpiarModeloTabla(modelo, tblCategorias);

        // Verificar si la lista de socios tiene elementos
        if (listaCategorias.size() > 0) {
            System.out.println("LISTADO DE CATEGORIAS DESDE LA BBDD");
            // Iterar sobre la lista de categorias y agregar cada categoria a la tabla
            for (Categoria categoria : listaCategorias) {      

                System.out.println("categoria.getIdCategoria():"+categoria.getIdCategoria()+" ,categoria.getNombre():"+categoria.getNombre()+" ,categoria.getEdadMin():"+categoria.getEdadMin()+" ,categoria.getEdadMax():"+categoria.getEdadMax());

                // Crea un array de objetos con los datos de la categoria para agregar a la tabla.
                Object[] fila = new Object[]{
                    categoria.getIdCategoria(),
                    categoria.getNombre(),
                    categoria.getEdadMin(),
                    categoria.getEdadMax()
                };
                modelo.addRow(fila); // Agregar la fila al modelo de la tabla
            }
            // Establece un renderizador personalizado para las celdas de la tabla.
            tblCategorias.setDefaultRenderer(Object.class, new Utils(18));

            // Agregar botones en la última columna
            tblCategorias.getColumn("Acciones").setCellRenderer(new ButtonRenderer());
            tblCategorias.getColumn("Acciones").setCellEditor(new ButtonEditor(new JCheckBox()));

            // Establece el modo de selección de filas para permitir solo una selección a la vez.
            tblCategorias.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        }
    }
}
